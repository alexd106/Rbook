<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>7.5 Loops | An Introduction to R</title>
  <meta name="description" content="A practical introduction to using R for data analysis" />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="7.5 Loops | An Introduction to R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://alexd106.github.io/Rbook/" />
  <meta property="og:image" content="https://alexd106.github.io/Rbook/images/cover_v3.png" />
  <meta property="og:description" content="A practical introduction to using R for data analysis" />
  <meta name="github-repo" content="alexd106/Rbook" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="7.5 Loops | An Introduction to R" />
  
  <meta name="twitter:description" content="A practical introduction to using R for data analysis" />
  <meta name="twitter:image" content="https://alexd106.github.io/Rbook/images/cover_v3.png" />

<meta name="author" content="Alex Douglas, Deon Roos, Francesca Mancini, Ana Couto &amp; David Lusseau" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="combining-logical-operators.html"/>
<link rel="next" href="exercise-6.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/font-awesome-5.3.1/css/fontawesome-all.min.css" rel="stylesheet" />
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-162377463-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-162377463-3');
</script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">An Introduction R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="0.1" data-path="the-aim-of-this-book.html"><a href="the-aim-of-this-book.html"><i class="fa fa-check"></i><b>0.1</b> The aim of this book</a></li>
<li class="chapter" data-level="0.2" data-path="who-is-this-book-for.html"><a href="who-is-this-book-for.html"><i class="fa fa-check"></i><b>0.2</b> Who is this book for?</a></li>
<li class="chapter" data-level="0.3" data-path="why-an-open-book.html"><a href="why-an-open-book.html"><i class="fa fa-check"></i><b>0.3</b> Why an open book?</a></li>
<li class="chapter" data-level="0.4" data-path="whoarewe.html"><a href="whoarewe.html"><i class="fa fa-check"></i><b>0.4</b> Who are we?</a></li>
<li class="chapter" data-level="0.5" data-path="book-website.html"><a href="book-website.html"><i class="fa fa-check"></i><b>0.5</b> Book website</a></li>
<li class="chapter" data-level="0.6" data-path="some-r-pointers.html"><a href="some-r-pointers.html"><i class="fa fa-check"></i><b>0.6</b> Some R pointers</a></li>
<li class="chapter" data-level="0.7" data-path="thanks.html"><a href="thanks.html"><i class="fa fa-check"></i><b>0.7</b> Thanks</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="chap1.html"><a href="chap1.html"><i class="fa fa-check"></i><b>1</b> Getting started with R and RStudio</a><ul>
<li class="chapter" data-level="1.1" data-path="install-r.html"><a href="install-r.html"><i class="fa fa-check"></i><b>1.1</b> Installing R</a><ul>
<li class="chapter" data-level="1.1.1" data-path="install-r.html"><a href="install-r.html#windows-users"><i class="fa fa-check"></i><b>1.1.1</b> Windows users</a></li>
<li class="chapter" data-level="1.1.2" data-path="install-r.html"><a href="install-r.html#mac-users"><i class="fa fa-check"></i><b>1.1.2</b> Mac users</a></li>
<li class="chapter" data-level="1.1.3" data-path="install-r.html"><a href="install-r.html#linux-users"><i class="fa fa-check"></i><b>1.1.3</b> Linux users</a></li>
<li class="chapter" data-level="1.1.4" data-path="install-r.html"><a href="install-r.html#testing-r"><i class="fa fa-check"></i><b>1.1.4</b> Testing R</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="installing-rstudio.html"><a href="installing-rstudio.html"><i class="fa fa-check"></i><b>1.2</b> Installing RStudio</a><ul>
<li class="chapter" data-level="1.2.1" data-path="installing-rstudio.html"><a href="installing-rstudio.html#windows-and-mac-users"><i class="fa fa-check"></i><b>1.2.1</b> Windows and Mac users</a></li>
<li class="chapter" data-level="1.2.2" data-path="installing-rstudio.html"><a href="installing-rstudio.html#linux-users-1"><i class="fa fa-check"></i><b>1.2.2</b> Linux users</a></li>
<li class="chapter" data-level="1.2.3" data-path="installing-rstudio.html"><a href="installing-rstudio.html#testing-rstudio"><i class="fa fa-check"></i><b>1.2.3</b> Testing RStudio</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="rstudio-orient.html"><a href="rstudio-orient.html"><i class="fa fa-check"></i><b>1.3</b> RStudio orientation</a><ul>
<li class="chapter" data-level="1.3.1" data-path="rstudio-orient.html"><a href="rstudio-orient.html#cons"><i class="fa fa-check"></i><b>1.3.1</b> Console</a></li>
<li class="chapter" data-level="1.3.2" data-path="rstudio-orient.html"><a href="rstudio-orient.html#environmenthistoryconnections"><i class="fa fa-check"></i><b>1.3.2</b> Environment/History/Connections</a></li>
<li class="chapter" data-level="1.3.3" data-path="rstudio-orient.html"><a href="rstudio-orient.html#filesplotspackageshelpviewer"><i class="fa fa-check"></i><b>1.3.3</b> Files/Plots/Packages/Help/Viewer</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="alternatives-to-rstudio.html"><a href="alternatives-to-rstudio.html"><i class="fa fa-check"></i><b>1.4</b> Alternatives to RStudio</a></li>
<li class="chapter" data-level="1.5" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>1.5</b> R packages</a><ul>
<li class="chapter" data-level="1.5.1" data-path="packages.html"><a href="packages.html#cran_packages"><i class="fa fa-check"></i><b>1.5.1</b> CRAN packages</a></li>
<li class="chapter" data-level="1.5.2" data-path="packages.html"><a href="packages.html#bioconductor-packages"><i class="fa fa-check"></i><b>1.5.2</b> Bioconductor packages</a></li>
<li class="chapter" data-level="1.5.3" data-path="packages.html"><a href="packages.html#github-packages"><i class="fa fa-check"></i><b>1.5.3</b> GitHub packages</a></li>
<li class="chapter" data-level="1.5.4" data-path="packages.html"><a href="packages.html#using-packages"><i class="fa fa-check"></i><b>1.5.4</b> Using packages</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="rsprojs.html"><a href="rsprojs.html"><i class="fa fa-check"></i><b>1.6</b> Projects in RStudio</a></li>
<li class="chapter" data-level="1.7" data-path="work-d.html"><a href="work-d.html"><i class="fa fa-check"></i><b>1.7</b> Working directories</a></li>
<li class="chapter" data-level="1.8" data-path="dir-struct.html"><a href="dir-struct.html"><i class="fa fa-check"></i><b>1.8</b> Directory structure</a></li>
<li class="chapter" data-level="1.9" data-path="file-names.html"><a href="file-names.html"><i class="fa fa-check"></i><b>1.9</b> File names</a></li>
<li class="chapter" data-level="1.10" data-path="proj-doc.html"><a href="proj-doc.html"><i class="fa fa-check"></i><b>1.10</b> Project documentation</a></li>
<li class="chapter" data-level="1.11" data-path="r-style-guide.html"><a href="r-style-guide.html"><i class="fa fa-check"></i><b>1.11</b> R style guide</a></li>
<li class="chapter" data-level="1.12" data-path="backing-up-projects.html"><a href="backing-up-projects.html"><i class="fa fa-check"></i><b>1.12</b> Backing up projects</a></li>
<li class="chapter" data-level="1.13" data-path="citing-r.html"><a href="citing-r.html"><i class="fa fa-check"></i><b>1.13</b> Citing R</a></li>
<li class="chapter" data-level="1.14" data-path="exercise.html"><a href="exercise.html"><i class="fa fa-check"></i><b>1.14</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="basics-r.html"><a href="basics-r.html"><i class="fa fa-check"></i><b>2</b> Some R basics</a><ul>
<li class="chapter" data-level="2.1" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>2.1</b> Getting started</a></li>
<li class="chapter" data-level="2.2" data-path="objects-in-r.html"><a href="objects-in-r.html"><i class="fa fa-check"></i><b>2.2</b> Objects in R</a><ul>
<li class="chapter" data-level="2.2.1" data-path="objects-in-r.html"><a href="objects-in-r.html#r_objs"><i class="fa fa-check"></i><b>2.2.1</b> Creating objects</a></li>
<li class="chapter" data-level="2.2.2" data-path="objects-in-r.html"><a href="objects-in-r.html#naming-objects"><i class="fa fa-check"></i><b>2.2.2</b> Naming objects</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="using-functions-in-r.html"><a href="using-functions-in-r.html"><i class="fa fa-check"></i><b>2.3</b> Using functions in R</a></li>
<li class="chapter" data-level="2.4" data-path="vectors.html"><a href="vectors.html"><i class="fa fa-check"></i><b>2.4</b> Working with vectors</a><ul>
<li class="chapter" data-level="2.4.1" data-path="vectors.html"><a href="vectors.html#extracting-elements"><i class="fa fa-check"></i><b>2.4.1</b> Extracting elements</a></li>
<li class="chapter" data-level="2.4.2" data-path="vectors.html"><a href="vectors.html#replacing-elements"><i class="fa fa-check"></i><b>2.4.2</b> Replacing elements</a></li>
<li class="chapter" data-level="2.4.3" data-path="vectors.html"><a href="vectors.html#vec_ord"><i class="fa fa-check"></i><b>2.4.3</b> Ordering elements</a></li>
<li class="chapter" data-level="2.4.4" data-path="vectors.html"><a href="vectors.html#vectorisation"><i class="fa fa-check"></i><b>2.4.4</b> Vectorisation</a></li>
<li class="chapter" data-level="2.4.5" data-path="vectors.html"><a href="vectors.html#na_vals"><i class="fa fa-check"></i><b>2.4.5</b> Missing data</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="help.html"><a href="help.html"><i class="fa fa-check"></i><b>2.5</b> Getting help</a><ul>
<li class="chapter" data-level="2.5.1" data-path="help.html"><a href="help.html#r-help"><i class="fa fa-check"></i><b>2.5.1</b> R help</a></li>
<li class="chapter" data-level="2.5.2" data-path="help.html"><a href="help.html#rhelp"><i class="fa fa-check"></i><b>2.5.2</b> Other sources of help</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="saving-stuff-in-r.html"><a href="saving-stuff-in-r.html"><i class="fa fa-check"></i><b>2.6</b> Saving stuff in R</a></li>
<li class="chapter" data-level="2.7" data-path="exercise-1.html"><a href="exercise-1.html"><i class="fa fa-check"></i><b>2.7</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-r.html"><a href="data-r.html"><i class="fa fa-check"></i><b>3</b> Data in R</a><ul>
<li class="chapter" data-level="3.1" data-path="data-types.html"><a href="data-types.html"><i class="fa fa-check"></i><b>3.1</b> Data types</a></li>
<li class="chapter" data-level="3.2" data-path="data-structures.html"><a href="data-structures.html"><i class="fa fa-check"></i><b>3.2</b> Data structures</a><ul>
<li class="chapter" data-level="3.2.1" data-path="data-structures.html"><a href="data-structures.html#scal_vecs"><i class="fa fa-check"></i><b>3.2.1</b> Scalars and vectors</a></li>
<li class="chapter" data-level="3.2.2" data-path="data-structures.html"><a href="data-structures.html#mat_array"><i class="fa fa-check"></i><b>3.2.2</b> Matrices and arrays</a></li>
<li class="chapter" data-level="3.2.3" data-path="data-structures.html"><a href="data-structures.html#lists"><i class="fa fa-check"></i><b>3.2.3</b> Lists</a></li>
<li class="chapter" data-level="3.2.4" data-path="data-structures.html"><a href="data-structures.html#df"><i class="fa fa-check"></i><b>3.2.4</b> Data frames</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="importing-data.html"><a href="importing-data.html"><i class="fa fa-check"></i><b>3.3</b> Importing data</a><ul>
<li class="chapter" data-level="3.3.1" data-path="importing-data.html"><a href="importing-data.html#saving-files-to-import"><i class="fa fa-check"></i><b>3.3.1</b> Saving files to import</a></li>
<li class="chapter" data-level="3.3.2" data-path="importing-data.html"><a href="importing-data.html#import_fnc"><i class="fa fa-check"></i><b>3.3.2</b> Import functions</a></li>
<li class="chapter" data-level="3.3.3" data-path="importing-data.html"><a href="importing-data.html#common-import-frustrations"><i class="fa fa-check"></i><b>3.3.3</b> Common import frustrations</a></li>
<li class="chapter" data-level="3.3.4" data-path="importing-data.html"><a href="importing-data.html#import_other"><i class="fa fa-check"></i><b>3.3.4</b> Other import options</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="wrangling-data-frames.html"><a href="wrangling-data-frames.html"><i class="fa fa-check"></i><b>3.4</b> Wrangling data frames</a><ul>
<li class="chapter" data-level="3.4.1" data-path="wrangling-data-frames.html"><a href="wrangling-data-frames.html#positional-indexes"><i class="fa fa-check"></i><b>3.4.1</b> Positional indexes</a></li>
<li class="chapter" data-level="3.4.2" data-path="wrangling-data-frames.html"><a href="wrangling-data-frames.html#logical-indexes"><i class="fa fa-check"></i><b>3.4.2</b> Logical indexes</a></li>
<li class="chapter" data-level="3.4.3" data-path="wrangling-data-frames.html"><a href="wrangling-data-frames.html#ordering-data-frames"><i class="fa fa-check"></i><b>3.4.3</b> Ordering data frames</a></li>
<li class="chapter" data-level="3.4.4" data-path="wrangling-data-frames.html"><a href="wrangling-data-frames.html#adding-columns-and-rows"><i class="fa fa-check"></i><b>3.4.4</b> Adding columns and rows</a></li>
<li class="chapter" data-level="3.4.5" data-path="wrangling-data-frames.html"><a href="wrangling-data-frames.html#merging-data-frames"><i class="fa fa-check"></i><b>3.4.5</b> Merging data frames</a></li>
<li class="chapter" data-level="3.4.6" data-path="wrangling-data-frames.html"><a href="wrangling-data-frames.html#reshape"><i class="fa fa-check"></i><b>3.4.6</b> Reshaping data frames</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="summarising-data-frames.html"><a href="summarising-data-frames.html"><i class="fa fa-check"></i><b>3.5</b> Summarising data frames</a></li>
<li class="chapter" data-level="3.6" data-path="exporting-data.html"><a href="exporting-data.html"><i class="fa fa-check"></i><b>3.6</b> Exporting data</a><ul>
<li class="chapter" data-level="3.6.1" data-path="exporting-data.html"><a href="exporting-data.html#export-functions"><i class="fa fa-check"></i><b>3.6.1</b> Export functions</a></li>
<li class="chapter" data-level="3.6.2" data-path="exporting-data.html"><a href="exporting-data.html#other-export-functions"><i class="fa fa-check"></i><b>3.6.2</b> Other export functions</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="exercise-2.html"><a href="exercise-2.html"><i class="fa fa-check"></i><b>3.7</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="graphics-base-r.html"><a href="graphics-base-r.html"><i class="fa fa-check"></i><b>4</b> Graphics with base R</a><ul>
<li class="chapter" data-level="4.1" data-path="baseplot-start.html"><a href="baseplot-start.html"><i class="fa fa-check"></i><b>4.1</b> Getting started</a></li>
<li class="chapter" data-level="4.2" data-path="simple-base-r-plots.html"><a href="simple-base-r-plots.html"><i class="fa fa-check"></i><b>4.2</b> Simple base R plots</a><ul>
<li class="chapter" data-level="4.2.1" data-path="simple-base-r-plots.html"><a href="simple-base-r-plots.html#scatterplot"><i class="fa fa-check"></i><b>4.2.1</b> Scatterplots</a></li>
<li class="chapter" data-level="4.2.2" data-path="simple-base-r-plots.html"><a href="simple-base-r-plots.html#histograms"><i class="fa fa-check"></i><b>4.2.2</b> Histograms</a></li>
<li class="chapter" data-level="4.2.3" data-path="simple-base-r-plots.html"><a href="simple-base-r-plots.html#box-and-violin-plots"><i class="fa fa-check"></i><b>4.2.3</b> Box and violin plots</a></li>
<li class="chapter" data-level="4.2.4" data-path="simple-base-r-plots.html"><a href="simple-base-r-plots.html#dotcharts"><i class="fa fa-check"></i><b>4.2.4</b> Dot charts</a></li>
<li class="chapter" data-level="4.2.5" data-path="simple-base-r-plots.html"><a href="simple-base-r-plots.html#pairs-plots"><i class="fa fa-check"></i><b>4.2.5</b> Pairs plots</a></li>
<li class="chapter" data-level="4.2.6" data-path="simple-base-r-plots.html"><a href="simple-base-r-plots.html#coplots"><i class="fa fa-check"></i><b>4.2.6</b> Coplots</a></li>
<li class="chapter" data-level="4.2.7" data-path="simple-base-r-plots.html"><a href="simple-base-r-plots.html#lattice-plots"><i class="fa fa-check"></i><b>4.2.7</b> Lattice plots</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="custom-plot.html"><a href="custom-plot.html"><i class="fa fa-check"></i><b>4.3</b> Customising plots</a><ul>
<li class="chapter" data-level="4.3.1" data-path="custom-plot.html"><a href="custom-plot.html#customising-with-arguments"><i class="fa fa-check"></i><b>4.3.1</b> Customising with arguments</a></li>
<li class="chapter" data-level="4.3.2" data-path="custom-plot.html"><a href="custom-plot.html#building-plots"><i class="fa fa-check"></i><b>4.3.2</b> Building plots</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="mult-graphs.html"><a href="mult-graphs.html"><i class="fa fa-check"></i><b>4.4</b> Multiple graphs</a></li>
<li class="chapter" data-level="4.5" data-path="export-plots.html"><a href="export-plots.html"><i class="fa fa-check"></i><b>4.5</b> Exporting plots</a></li>
<li class="chapter" data-level="4.6" data-path="exercise-3.html"><a href="exercise-3.html"><i class="fa fa-check"></i><b>4.6</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="graphics-r.html"><a href="graphics-r.html"><i class="fa fa-check"></i><b>5</b> Graphics with ggplot</a><ul>
<li class="chapter" data-level="5.1" data-path="beginning-at-the-end.html"><a href="beginning-at-the-end.html"><i class="fa fa-check"></i><b>5.1</b> Beginning at the end</a></li>
<li class="chapter" data-level="5.2" data-path="the-start-of-the-end.html"><a href="the-start-of-the-end.html"><i class="fa fa-check"></i><b>5.2</b> The start of the end</a><ul>
<li class="chapter" data-level="5.2.1" data-path="the-start-of-the-end.html"><a href="the-start-of-the-end.html#the-purest-of-ggplots"><i class="fa fa-check"></i><b>5.2.1</b> The purest of ggplots</a></li>
<li class="chapter" data-level="5.2.2" data-path="the-start-of-the-end.html"><a href="the-start-of-the-end.html#wrapping-grids"><i class="fa fa-check"></i><b>5.2.2</b> Wrapping grids</a></li>
<li class="chapter" data-level="5.2.3" data-path="the-start-of-the-end.html"><a href="the-start-of-the-end.html#plotting-multiple-ggplots"><i class="fa fa-check"></i><b>5.2.3</b> Plotting multiple ggplots</a></li>
<li class="chapter" data-level="5.2.4" data-path="the-start-of-the-end.html"><a href="the-start-of-the-end.html#make-it-your-own"><i class="fa fa-check"></i><b>5.2.4</b> Make it your own</a></li>
<li class="chapter" data-level="5.2.5" data-path="the-start-of-the-end.html"><a href="the-start-of-the-end.html#setting-the-theme"><i class="fa fa-check"></i><b>5.2.5</b> Setting the theme</a></li>
<li class="chapter" data-level="5.2.6" data-path="the-start-of-the-end.html"><a href="the-start-of-the-end.html#prettification"><i class="fa fa-check"></i><b>5.2.6</b> Prettification</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="tips.html"><a href="tips.html"><i class="fa fa-check"></i><b>5.3</b> Tips and tricks</a><ul>
<li class="chapter" data-level="5.3.1" data-path="tips.html"><a href="tips.html#statistics-layer"><i class="fa fa-check"></i><b>5.3.1</b> Statistics layer</a></li>
<li class="chapter" data-level="5.3.2" data-path="tips.html"><a href="tips.html#axis-limits-and-zooms"><i class="fa fa-check"></i><b>5.3.2</b> Axis limits and zooms</a></li>
<li class="chapter" data-level="5.3.3" data-path="tips.html"><a href="tips.html#layering-layers"><i class="fa fa-check"></i><b>5.3.3</b> Layering layers</a></li>
<li class="chapter" data-level="5.3.4" data-path="tips.html"><a href="tips.html#continuous-colours"><i class="fa fa-check"></i><b>5.3.4</b> Continuous colours</a></li>
<li class="chapter" data-level="5.3.5" data-path="tips.html"><a href="tips.html#size-of-points"><i class="fa fa-check"></i><b>5.3.5</b> Size of points</a></li>
<li class="chapter" data-level="5.3.6" data-path="tips.html"><a href="tips.html#moving-the-legend"><i class="fa fa-check"></i><b>5.3.6</b> Moving the legend</a></li>
<li class="chapter" data-level="5.3.7" data-path="tips.html"><a href="tips.html#hiding-the-legend"><i class="fa fa-check"></i><b>5.3.7</b> Hiding the legend</a></li>
<li class="chapter" data-level="5.3.8" data-path="tips.html"><a href="tips.html#hiding-part-of-the-legend"><i class="fa fa-check"></i><b>5.3.8</b> Hiding part of the legend</a></li>
<li class="chapter" data-level="5.3.9" data-path="tips.html"><a href="tips.html#writing-on-a-figure"><i class="fa fa-check"></i><b>5.3.9</b> Writing on a figure</a></li>
<li class="chapter" data-level="5.3.10" data-path="tips.html"><a href="tips.html#ticks-and-tick-labels"><i class="fa fa-check"></i><b>5.3.10</b> Ticks and tick labels</a></li>
<li class="chapter" data-level="5.3.11" data-path="tips.html"><a href="tips.html#more-advanced-patchwork"><i class="fa fa-check"></i><b>5.3.11</b> More advanced patchwork</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="bestiary.html"><a href="bestiary.html"><i class="fa fa-check"></i><b>5.4</b> A ggplot bestiary</a><ul>
<li class="chapter" data-level="5.4.1" data-path="bestiary.html"><a href="bestiary.html#density-plot"><i class="fa fa-check"></i><b>5.4.1</b> Density plot</a></li>
<li class="chapter" data-level="5.4.2" data-path="bestiary.html"><a href="bestiary.html#histogram"><i class="fa fa-check"></i><b>5.4.2</b> Histogram</a></li>
<li class="chapter" data-level="5.4.3" data-path="bestiary.html"><a href="bestiary.html#frequency-polygons"><i class="fa fa-check"></i><b>5.4.3</b> Frequency polygons</a></li>
<li class="chapter" data-level="5.4.4" data-path="bestiary.html"><a href="bestiary.html#boxplot"><i class="fa fa-check"></i><b>5.4.4</b> Boxplot</a></li>
<li class="chapter" data-level="5.4.5" data-path="bestiary.html"><a href="bestiary.html#violin-plots"><i class="fa fa-check"></i><b>5.4.5</b> Violin plots</a></li>
<li class="chapter" data-level="5.4.6" data-path="bestiary.html"><a href="bestiary.html#barchart"><i class="fa fa-check"></i><b>5.4.6</b> Barchart</a></li>
<li class="chapter" data-level="5.4.7" data-path="bestiary.html"><a href="bestiary.html#quantile-lines"><i class="fa fa-check"></i><b>5.4.7</b> Quantile lines</a></li>
<li class="chapter" data-level="5.4.8" data-path="bestiary.html"><a href="bestiary.html#heatmap"><i class="fa fa-check"></i><b>5.4.8</b> Heatmap</a></li>
<li class="chapter" data-level="5.4.9" data-path="bestiary.html"><a href="bestiary.html#hex-map"><i class="fa fa-check"></i><b>5.4.9</b> Hex map</a></li>
<li class="chapter" data-level="5.4.10" data-path="bestiary.html"><a href="bestiary.html#contour-map"><i class="fa fa-check"></i><b>5.4.10</b> Contour map</a></li>
<li class="chapter" data-level="5.4.11" data-path="bestiary.html"><a href="bestiary.html#cleveland-dotplot"><i class="fa fa-check"></i><b>5.4.11</b> Cleveland dotplot</a></li>
<li class="chapter" data-level="5.4.12" data-path="bestiary.html"><a href="bestiary.html#pairs-plot"><i class="fa fa-check"></i><b>5.4.12</b> Pairs plot</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="exercise-4.html"><a href="exercise-4.html"><i class="fa fa-check"></i><b>5.5</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="stats-r.html"><a href="stats-r.html"><i class="fa fa-check"></i><b>6</b> Simple Statistics in R</a><ul>
<li class="chapter" data-level="6.1" data-path="one-and-two-sample-tests.html"><a href="one-and-two-sample-tests.html"><i class="fa fa-check"></i><b>6.1</b> One and two sample tests</a></li>
<li class="chapter" data-level="6.2" data-path="correlation.html"><a href="correlation.html"><i class="fa fa-check"></i><b>6.2</b> Correlation</a></li>
<li class="chapter" data-level="6.3" data-path="simple-lm.html"><a href="simple-lm.html"><i class="fa fa-check"></i><b>6.3</b> Simple linear modelling</a></li>
<li class="chapter" data-level="6.4" data-path="other-modelling-approaches.html"><a href="other-modelling-approaches.html"><i class="fa fa-check"></i><b>6.4</b> Other modelling approaches</a></li>
<li class="chapter" data-level="6.5" data-path="exercise-5.html"><a href="exercise-5.html"><i class="fa fa-check"></i><b>6.5</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="prog-r.html"><a href="prog-r.html"><i class="fa fa-check"></i><b>7</b> Programming in R</a><ul>
<li class="chapter" data-level="7.1" data-path="looking-behind-the-curtain.html"><a href="looking-behind-the-curtain.html"><i class="fa fa-check"></i><b>7.1</b> Looking behind the curtain</a></li>
<li class="chapter" data-level="7.2" data-path="functions-in-r.html"><a href="functions-in-r.html"><i class="fa fa-check"></i><b>7.2</b> Functions in R</a></li>
<li class="chapter" data-level="7.3" data-path="conditional-statements.html"><a href="conditional-statements.html"><i class="fa fa-check"></i><b>7.3</b> Conditional statements</a></li>
<li class="chapter" data-level="7.4" data-path="combining-logical-operators.html"><a href="combining-logical-operators.html"><i class="fa fa-check"></i><b>7.4</b> Combining logical operators</a></li>
<li class="chapter" data-level="7.5" data-path="loops.html"><a href="loops.html"><i class="fa fa-check"></i><b>7.5</b> Loops</a><ul>
<li class="chapter" data-level="7.5.1" data-path="loops.html"><a href="loops.html#for-loop"><i class="fa fa-check"></i><b>7.5.1</b> For loop</a></li>
<li class="chapter" data-level="7.5.2" data-path="loops.html"><a href="loops.html#while-loop"><i class="fa fa-check"></i><b>7.5.2</b> While loop</a></li>
<li class="chapter" data-level="7.5.3" data-path="loops.html"><a href="loops.html#when-to-use-a-loop"><i class="fa fa-check"></i><b>7.5.3</b> When to use a loop?</a></li>
<li class="chapter" data-level="7.5.4" data-path="loops.html"><a href="loops.html#if-not-loops-then-what"><i class="fa fa-check"></i><b>7.5.4</b> If not loops, then what?</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="exercise-6.html"><a href="exercise-6.html"><i class="fa fa-check"></i><b>7.6</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="rmarkdown-r.html"><a href="rmarkdown-r.html"><i class="fa fa-check"></i><b>8</b> Reproducible reports with R markdown</a><ul>
<li class="chapter" data-level="8.1" data-path="what-is-r-markdown.html"><a href="what-is-r-markdown.html"><i class="fa fa-check"></i><b>8.1</b> What is R markdown?</a></li>
<li class="chapter" data-level="8.2" data-path="why-use-r-markdown.html"><a href="why-use-r-markdown.html"><i class="fa fa-check"></i><b>8.2</b> Why use R markdown?</a></li>
<li class="chapter" data-level="8.3" data-path="get-started-with-r-markdown.html"><a href="get-started-with-r-markdown.html"><i class="fa fa-check"></i><b>8.3</b> Get started with R markdown</a></li>
<li class="chapter" data-level="8.4" data-path="new-rm.html"><a href="new-rm.html"><i class="fa fa-check"></i><b>8.4</b> Create an R markdown document</a></li>
<li class="chapter" data-level="8.5" data-path="r-markdown-anatomy.html"><a href="r-markdown-anatomy.html"><i class="fa fa-check"></i><b>8.5</b> R markdown anatomy</a><ul>
<li class="chapter" data-level="8.5.1" data-path="r-markdown-anatomy.html"><a href="r-markdown-anatomy.html#yaml-header"><i class="fa fa-check"></i><b>8.5.1</b> YAML header</a></li>
<li class="chapter" data-level="8.5.2" data-path="r-markdown-anatomy.html"><a href="r-markdown-anatomy.html#formatted-text"><i class="fa fa-check"></i><b>8.5.2</b> Formatted text</a></li>
<li class="chapter" data-level="8.5.3" data-path="r-markdown-anatomy.html"><a href="r-markdown-anatomy.html#code_chunks"><i class="fa fa-check"></i><b>8.5.3</b> Code chunks</a></li>
<li class="chapter" data-level="8.5.4" data-path="r-markdown-anatomy.html"><a href="r-markdown-anatomy.html#adding-figures"><i class="fa fa-check"></i><b>8.5.4</b> Adding figures</a></li>
<li class="chapter" data-level="8.5.5" data-path="r-markdown-anatomy.html"><a href="r-markdown-anatomy.html#adding-tables"><i class="fa fa-check"></i><b>8.5.5</b> Adding tables</a></li>
<li class="chapter" data-level="8.5.6" data-path="r-markdown-anatomy.html"><a href="r-markdown-anatomy.html#inline-r-code"><i class="fa fa-check"></i><b>8.5.6</b> Inline R code</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="tips-tricks.html"><a href="tips-tricks.html"><i class="fa fa-check"></i><b>8.6</b> Some tips and tricks</a></li>
<li class="chapter" data-level="8.7" data-path="further-information.html"><a href="further-information.html"><i class="fa fa-check"></i><b>8.7</b> Further Information</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="github-r.html"><a href="github-r.html"><i class="fa fa-check"></i><b>9</b> Version control with Git and GitHub</a><ul>
<li class="chapter" data-level="9.1" data-path="what-is-version-control.html"><a href="what-is-version-control.html"><i class="fa fa-check"></i><b>9.1</b> What is version control?</a></li>
<li class="chapter" data-level="9.2" data-path="why-use-version-control.html"><a href="why-use-version-control.html"><i class="fa fa-check"></i><b>9.2</b> Why use version control?</a></li>
<li class="chapter" data-level="9.3" data-path="what-is-git-and-github.html"><a href="what-is-git-and-github.html"><i class="fa fa-check"></i><b>9.3</b> What is Git and GitHub?</a></li>
<li class="chapter" data-level="9.4" data-path="setup-git.html"><a href="setup-git.html"><i class="fa fa-check"></i><b>9.4</b> Getting started</a><ul>
<li class="chapter" data-level="9.4.1" data-path="setup-git.html"><a href="setup-git.html#install-git"><i class="fa fa-check"></i><b>9.4.1</b> Install Git</a></li>
<li class="chapter" data-level="9.4.2" data-path="setup-git.html"><a href="setup-git.html#configure-git"><i class="fa fa-check"></i><b>9.4.2</b> Configure Git</a></li>
<li class="chapter" data-level="9.4.3" data-path="setup-git.html"><a href="setup-git.html#rs_config"><i class="fa fa-check"></i><b>9.4.3</b> Configure RStudio</a></li>
<li class="chapter" data-level="9.4.4" data-path="setup-git.html"><a href="setup-git.html#register-a-github-account"><i class="fa fa-check"></i><b>9.4.4</b> Register a GitHub account</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="setting-up-a-project-in-rstudio.html"><a href="setting-up-a-project-in-rstudio.html"><i class="fa fa-check"></i><b>9.5</b> Setting up a project in RStudio</a><ul>
<li class="chapter" data-level="9.5.1" data-path="setting-up-a-project-in-rstudio.html"><a href="setting-up-a-project-in-rstudio.html#opt1"><i class="fa fa-check"></i><b>9.5.1</b> Option 1 - GitHub first</a></li>
<li class="chapter" data-level="9.5.2" data-path="setting-up-a-project-in-rstudio.html"><a href="setting-up-a-project-in-rstudio.html#opt2"><i class="fa fa-check"></i><b>9.5.2</b> Option 2 - RStudio first</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="use-git.html"><a href="use-git.html"><i class="fa fa-check"></i><b>9.6</b> Using Git</a><ul>
<li class="chapter" data-level="9.6.1" data-path="use-git.html"><a href="use-git.html#tracking-changes"><i class="fa fa-check"></i><b>9.6.1</b> Tracking changes</a></li>
<li class="chapter" data-level="9.6.2" data-path="use-git.html"><a href="use-git.html#commit-history"><i class="fa fa-check"></i><b>9.6.2</b> Commit history</a></li>
<li class="chapter" data-level="9.6.3" data-path="use-git.html"><a href="use-git.html#undo"><i class="fa fa-check"></i><b>9.6.3</b> Reverting changes</a></li>
<li class="chapter" data-level="9.6.4" data-path="use-git.html"><a href="use-git.html#collab"><i class="fa fa-check"></i><b>9.6.4</b> Collaborate with Git</a></li>
<li class="chapter" data-level="9.6.5" data-path="use-git.html"><a href="use-git.html#git-tips"><i class="fa fa-check"></i><b>9.6.5</b> Git tips</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="resources.html"><a href="resources.html"><i class="fa fa-check"></i><b>9.7</b> Further resources</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="install-rm.html"><a href="install-rm.html"><i class="fa fa-check"></i><b>A</b> Installing R Markdown</a><ul>
<li class="chapter" data-level="A.1" data-path="ms-windows.html"><a href="ms-windows.html"><i class="fa fa-check"></i><b>A.1</b> MS Windows</a></li>
<li class="chapter" data-level="A.2" data-path="mac-osx.html"><a href="mac-osx.html"><i class="fa fa-check"></i><b>A.2</b> Mac OSX</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">An Introduction to R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="loops" class="section level2">
<h2><span class="header-section-number">7.5</span> Loops</h2>
<p>R is very good at performing repetitive tasks. If we want a set of operations to be repeated several times we use what’s known as a loop. When you create a loop, R will execute the instructions in the loop a specified number of times or until a specified condition is met. There are three main types of loop in R: the <em>for</em> loop, the <em>while</em> loop and the <em>repeat</em> loop.</p>
<p>Loops are one of the staples of all programming languages, not just R, and can be a powerful tool (although in our opinion, used far too frequently when writing R code).</p>
<div id="for-loop" class="section level3">
<h3><span class="header-section-number">7.5.1</span> For loop</h3>
<p>The most commonly used loop structure when you want to repeat a task a defined number of times is the <code>for</code> loop.
The most basic example of a <code>for</code> loop is:</p>
<div class="sourceCode" id="cb392"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb392-1"><a href="loops.html#cb392-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>) {</span>
<span id="cb392-2"><a href="loops.html#cb392-2"></a>  <span class="kw">print</span>(i)</span>
<span id="cb392-3"><a href="loops.html#cb392-3"></a>}</span>
<span id="cb392-4"><a href="loops.html#cb392-4"></a><span class="co">## [1] 1</span></span>
<span id="cb392-5"><a href="loops.html#cb392-5"></a><span class="co">## [1] 2</span></span>
<span id="cb392-6"><a href="loops.html#cb392-6"></a><span class="co">## [1] 3</span></span>
<span id="cb392-7"><a href="loops.html#cb392-7"></a><span class="co">## [1] 4</span></span>
<span id="cb392-8"><a href="loops.html#cb392-8"></a><span class="co">## [1] 5</span></span></code></pre></div>
<p>But what’s the code actually doing? This is a dynamic bit of code were an index <code>i</code> is iteratively replaced by each value in the vector <code>1:5</code>. Let’s break it down. Because the first value in our sequence (<code>1:5</code>) is <code>1</code>, the loop starts by replacing <code>i</code> with <code>1</code> and runs everything between the <code>{ }</code>. Loops conventionally use <code>i</code> as the counter, short for iteration, but you are free to use whatever you like, even your pet’s name, it really does not matter (except when using nested loops, in which case the counters must be called different things, like <code>SenorWhiskers</code> and <code>HerrFlufferkins</code>.</p>
<p>So, if we were to do the first iteration of the loop manually</p>
<div class="sourceCode" id="cb393"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb393-1"><a href="loops.html#cb393-1"></a>i &lt;-<span class="st"> </span><span class="dv">1</span></span>
<span id="cb393-2"><a href="loops.html#cb393-2"></a><span class="kw">print</span>(i)</span>
<span id="cb393-3"><a href="loops.html#cb393-3"></a><span class="co">## [1] 1</span></span></code></pre></div>
<p>Once this first iteration is complete, the for loop <em>loops</em> back to the beginning and replaces <code>i</code> with the next value in our <code>1:5</code> sequence (<code>2</code> in this case):</p>
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb394-1"><a href="loops.html#cb394-1"></a>i &lt;-<span class="st"> </span><span class="dv">2</span></span>
<span id="cb394-2"><a href="loops.html#cb394-2"></a><span class="kw">print</span>(i)</span>
<span id="cb394-3"><a href="loops.html#cb394-3"></a><span class="co">## [1] 2</span></span></code></pre></div>
<p>This process is then repeated until the loop reaches the final value in the sequence (<code>5</code> in this example) after which point it stops.</p>
<p>To reinforce how <code>for</code> loops work and introduce you to a valuable feature of loops, we’ll alter our counter within the loop. This can be used, for example, if we’re using a loop to iterate through a vector but want to select the next row (or any other value). To show this we’ll simply add 1 to the value of our index every time we iterate our loop.</p>
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb395-1"><a href="loops.html#cb395-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>) {</span>
<span id="cb395-2"><a href="loops.html#cb395-2"></a>  <span class="kw">print</span>(i <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)</span>
<span id="cb395-3"><a href="loops.html#cb395-3"></a>}</span>
<span id="cb395-4"><a href="loops.html#cb395-4"></a><span class="co">## [1] 2</span></span>
<span id="cb395-5"><a href="loops.html#cb395-5"></a><span class="co">## [1] 3</span></span>
<span id="cb395-6"><a href="loops.html#cb395-6"></a><span class="co">## [1] 4</span></span>
<span id="cb395-7"><a href="loops.html#cb395-7"></a><span class="co">## [1] 5</span></span>
<span id="cb395-8"><a href="loops.html#cb395-8"></a><span class="co">## [1] 6</span></span></code></pre></div>
<p>As in the previous loop, the first value in our sequence is 1. The loop begins by replacing <code>i</code> with <code>1</code>, but this time we’ve specified that a value of <code>1</code> must be added to <code>i</code> in the expression resulting in a value of <code>1 + 1</code>.</p>
<div class="sourceCode" id="cb396"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb396-1"><a href="loops.html#cb396-1"></a>i &lt;-<span class="st"> </span><span class="dv">1</span></span>
<span id="cb396-2"><a href="loops.html#cb396-2"></a>i <span class="op">+</span><span class="st"> </span><span class="dv">1</span></span>
<span id="cb396-3"><a href="loops.html#cb396-3"></a><span class="co">## [1] 2</span></span></code></pre></div>
<p>As before, once the iteration is complete, the loop moves onto the next value in the sequence and replaces <code>i</code> with the next value (<code>2</code> in this case) so that <code>i + 1</code> becomes <code>2 + 1</code>.</p>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb397-1"><a href="loops.html#cb397-1"></a>i &lt;-<span class="st"> </span><span class="dv">2</span></span>
<span id="cb397-2"><a href="loops.html#cb397-2"></a>i <span class="op">+</span><span class="st"> </span><span class="dv">1</span></span>
<span id="cb397-3"><a href="loops.html#cb397-3"></a><span class="co">## [1] 3</span></span></code></pre></div>
<p>And so on. I think you got the idea! In essence this is all a <code>for</code> loop is doing and nothing more.</p>
<p>Whilst above we have been using simple addition in the body of the loop, you can also combine loops with functions.</p>
<p>Let’s go back to our data frame <code>city</code>. Previously in the Chapter we created a function to multiply two columns and used it to create our <code>porto_aberdeen</code>, <code>aberdeen_nairobi</code>, and <code>nairobi_genoa</code> objects. We could have used a loop for this. Let’s remind ourselves what our data look like and the code for the <code>multiple_columns()</code> function.</p>
<div class="sourceCode" id="cb398"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb398-1"><a href="loops.html#cb398-1"></a><span class="co"># Recreating our dataset</span></span>
<span id="cb398-2"><a href="loops.html#cb398-2"></a>city &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</span>
<span id="cb398-3"><a href="loops.html#cb398-3"></a>  <span class="dt">porto =</span> <span class="kw">rnorm</span>(<span class="dv">100</span>),</span>
<span id="cb398-4"><a href="loops.html#cb398-4"></a>  <span class="dt">aberdeen =</span> <span class="kw">rnorm</span>(<span class="dv">100</span>),</span>
<span id="cb398-5"><a href="loops.html#cb398-5"></a>  <span class="dt">nairobi =</span> <span class="kw">c</span>(<span class="kw">rep</span>(<span class="ot">NA</span>, <span class="dv">10</span>), <span class="kw">rnorm</span>(<span class="dv">90</span>)),</span>
<span id="cb398-6"><a href="loops.html#cb398-6"></a>  <span class="dt">genoa =</span> <span class="kw">rnorm</span>(<span class="dv">100</span>)</span>
<span id="cb398-7"><a href="loops.html#cb398-7"></a>)</span>
<span id="cb398-8"><a href="loops.html#cb398-8"></a></span>
<span id="cb398-9"><a href="loops.html#cb398-9"></a><span class="co"># Our function</span></span>
<span id="cb398-10"><a href="loops.html#cb398-10"></a>multiply_columns &lt;-<span class="st"> </span><span class="cf">function</span>(x, y) {</span>
<span id="cb398-11"><a href="loops.html#cb398-11"></a>  temp &lt;-<span class="st"> </span>x <span class="op">*</span><span class="st"> </span>y</span>
<span id="cb398-12"><a href="loops.html#cb398-12"></a>  <span class="cf">if</span> (<span class="kw">any</span>(<span class="kw">is.na</span>(temp))) {</span>
<span id="cb398-13"><a href="loops.html#cb398-13"></a>    <span class="kw">warning</span>(<span class="st">&quot;The function has produced NAs&quot;</span>)</span>
<span id="cb398-14"><a href="loops.html#cb398-14"></a>    <span class="kw">return</span>(temp)</span>
<span id="cb398-15"><a href="loops.html#cb398-15"></a>  } <span class="cf">else</span> {</span>
<span id="cb398-16"><a href="loops.html#cb398-16"></a>    <span class="kw">return</span>(temp)</span>
<span id="cb398-17"><a href="loops.html#cb398-17"></a>  }</span>
<span id="cb398-18"><a href="loops.html#cb398-18"></a>}</span></code></pre></div>
<p>To use a list to iterate over these columns we need to first create an empty list (remember <a href="data-structures.html#lists">lists</a>?) which we call <code>temp</code> (short for temporary) which will be used to store the output of the <code>for</code> loop.</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="loops.html#cb399-1"></a>temp &lt;-<span class="st"> </span><span class="kw">list</span>()</span>
<span id="cb399-2"><a href="loops.html#cb399-2"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>(<span class="kw">ncol</span>(city) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)) {</span>
<span id="cb399-3"><a href="loops.html#cb399-3"></a>  temp[[i]] &lt;-<span class="st"> </span><span class="kw">multiply_columns</span>(<span class="dt">x =</span> city[, i], <span class="dt">y =</span> city[, i <span class="op">+</span><span class="st"> </span><span class="dv">1</span>])</span>
<span id="cb399-4"><a href="loops.html#cb399-4"></a>}</span>
<span id="cb399-5"><a href="loops.html#cb399-5"></a><span class="co">## Warning in multiply_columns(x = city[, i], y = city[, i + 1]): The function has</span></span>
<span id="cb399-6"><a href="loops.html#cb399-6"></a><span class="co">## produced NAs</span></span>
<span id="cb399-7"><a href="loops.html#cb399-7"></a></span>
<span id="cb399-8"><a href="loops.html#cb399-8"></a><span class="co">## Warning in multiply_columns(x = city[, i], y = city[, i + 1]): The function has</span></span>
<span id="cb399-9"><a href="loops.html#cb399-9"></a><span class="co">## produced NAs</span></span></code></pre></div>
<p>When we specify our <code>for</code> loop notice how we subtracted 1 from <code>ncol(city)</code>. The <code>ncol()</code> function returns the number of columns in our <code>city</code> data frame which is <code>4</code> and so our loop runs from <code>i = 1</code> to <code>i = 4 - 1</code> which is <code>i = 3</code>. We’ll come back to why we need to subtract 1 from this in a minute.</p>
<p>So in the first iteration of the loop <code>i</code> takes on the value <code>1</code>. The <code>multiply_columns()</code> function multiplies the <code>city[, 1]</code> (<code>porto</code>) and <code>city[, 1 + 1]</code> (<code>aberdeen</code>) columns and stores it in the <code>temp[[1]]</code> which is the first element of the <code>temp</code> list.</p>
<p>The second iteration of the loop <code>i</code> takes on the value <code>2</code>. The <code>multiply_columns()</code> function multiplies the <code>city[, 2]</code> (<code>aberdeen</code>) and <code>city[, 2 + 1]</code> (<code>nairobi</code>) columns and stores it in the <code>temp[[2]]</code> which is the second element of the <code>temp</code> list.</p>
<p>The third and final iteration of the loop <code>i</code> takes on the value <code>3</code>. The <code>multiply_columns()</code> function multiplies the <code>city[, 3]</code> (<code>nairobi</code>) and <code>city[, 3 + 1]</code> (<code>genoa</code>) columns and stores it in the <code>temp[[3]]</code> which is the third element of the <code>temp</code> list.</p>
<p>So can you see why we used <code>ncol(city) - 1</code> when we first set up our loop? As we have four columns in our <code>city</code> data frame if we didn’t use <code>ncol(city) - 1</code> then eventually we’d try to add the 4<sup>th</sup> column with the non-existent 5<sup>th</sup> column.</p>
<p>Again, it’s a good idea to test that we are getting something sensible from our loop (remember, check, check and check again!). To do this we can use the <code>identical()</code> function to compare the variables we created <code>by hand</code> with each iteration of the loop manually.</p>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="loops.html#cb400-1"></a>porto_aberdeen_func &lt;-<span class="st"> </span><span class="kw">multiply_columns</span>(city<span class="op">$</span>porto, city<span class="op">$</span>aberdeen)</span>
<span id="cb400-2"><a href="loops.html#cb400-2"></a>i &lt;-<span class="st"> </span><span class="dv">1</span></span>
<span id="cb400-3"><a href="loops.html#cb400-3"></a><span class="kw">identical</span>(<span class="kw">multiply_columns</span>(city[, i], city[, i <span class="op">+</span><span class="st"> </span><span class="dv">1</span>]), porto_aberdeen_func)</span>
<span id="cb400-4"><a href="loops.html#cb400-4"></a><span class="co">## [1] TRUE</span></span>
<span id="cb400-5"><a href="loops.html#cb400-5"></a></span>
<span id="cb400-6"><a href="loops.html#cb400-6"></a>aberdeen_nairobi_func &lt;-<span class="st"> </span><span class="kw">multiply_columns</span>(city<span class="op">$</span>aberdeen, city<span class="op">$</span>nairobi)</span>
<span id="cb400-7"><a href="loops.html#cb400-7"></a><span class="co">## Warning in multiply_columns(city$aberdeen, city$nairobi): The function has</span></span>
<span id="cb400-8"><a href="loops.html#cb400-8"></a><span class="co">## produced NAs</span></span>
<span id="cb400-9"><a href="loops.html#cb400-9"></a>i &lt;-<span class="st"> </span><span class="dv">2</span></span>
<span id="cb400-10"><a href="loops.html#cb400-10"></a><span class="kw">identical</span>(<span class="kw">multiply_columns</span>(city[, i], city[, i <span class="op">+</span><span class="st"> </span><span class="dv">1</span>]), aberdeen_nairobi_func)</span>
<span id="cb400-11"><a href="loops.html#cb400-11"></a><span class="co">## Warning in multiply_columns(city[, i], city[, i + 1]): The function has produced</span></span>
<span id="cb400-12"><a href="loops.html#cb400-12"></a><span class="co">## NAs</span></span>
<span id="cb400-13"><a href="loops.html#cb400-13"></a><span class="co">## [1] TRUE</span></span></code></pre></div>
<p>If you can follow the examples above, you’ll be in a good spot to begin writing some of your own for loops. That said there are other types of loops available to you.</p>
</div>
<div id="while-loop" class="section level3">
<h3><span class="header-section-number">7.5.2</span> While loop</h3>
<p>Another type of loop that you may use (albeit less frequently) is the <code>while</code> loop. The <code>while</code> loop is used when you want to keep looping until a specific logical condition is satisfied (contrast this with the <code>for</code> loop which will always iterate through an entire sequence).</p>
<p>The basic structure of the while loop is:</p>
<div class="sourceCode" id="cb401"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb401-1"><a href="loops.html#cb401-1"></a><span class="cf">while</span>(logical_condition){ expression }</span></code></pre></div>
<p>A simple example of a while loop is:</p>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb402-1"><a href="loops.html#cb402-1"></a>i &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb402-2"><a href="loops.html#cb402-2"></a><span class="cf">while</span> (i <span class="op">&lt;=</span><span class="st"> </span><span class="dv">4</span>) {</span>
<span id="cb402-3"><a href="loops.html#cb402-3"></a>  i &lt;-<span class="st"> </span>i <span class="op">+</span><span class="st"> </span><span class="dv">1</span></span>
<span id="cb402-4"><a href="loops.html#cb402-4"></a>  <span class="kw">print</span>(i)</span>
<span id="cb402-5"><a href="loops.html#cb402-5"></a>}</span>
<span id="cb402-6"><a href="loops.html#cb402-6"></a><span class="co">## [1] 1</span></span>
<span id="cb402-7"><a href="loops.html#cb402-7"></a><span class="co">## [1] 2</span></span>
<span id="cb402-8"><a href="loops.html#cb402-8"></a><span class="co">## [1] 3</span></span>
<span id="cb402-9"><a href="loops.html#cb402-9"></a><span class="co">## [1] 4</span></span>
<span id="cb402-10"><a href="loops.html#cb402-10"></a><span class="co">## [1] 5</span></span></code></pre></div>
<p>Here the loop will only continue to pass values to the main body of the loop (the <code>expression</code> body) when <code>i</code> is less than or equal to 4 (specified using the <code>&lt;=</code> operator in this example). Once <code>i</code> is greater than 4 the loop will stop.</p>
<p>There is another, very rarely used type of loop; the <code>repeat</code> loop. The <code>repeat</code> loop has no conditional check so can keep iterating indefinitely (meaning a break, or “stop here”, has to be coded into it). It’s worthwhile being aware of it’s existence, but for now we don’t think you need to worry about it; the <code>for</code> and <code>while</code> loops will see you through the vast majority of your looping needs.</p>
</div>
<div id="when-to-use-a-loop" class="section level3">
<h3><span class="header-section-number">7.5.3</span> When to use a loop?</h3>
<p>Loops are fairly commonly used, though sometimes a little overused in our opinion. Equivalent tasks can be performed with functions, which are often more efficient than loops. Though this raises the question when should you use a loop?</p>
<p>In general loops are implemented inefficiently in R and should be avoided when better alternatives exist, especially when you’re working with large datasets. However, loop are sometimes the only way to achieve the result we want.</p>
<p><strong>Some examples of when using loops can be appropriate:</strong></p>
<ul>
<li><p>Some simulations (e.g. the Ricker model can, in part, be built using loops)</p></li>
<li><p>Recursive relationships (a relationship which depends on the value of the previous relationship [“to understand recursion, you must understand recursion”])</p></li>
<li><p>More complex problems (e.g., how long since the last badger was seen at site <span class="math inline">\(j\)</span>, given a pine marten was seen at time <span class="math inline">\(t\)</span>, at the same location <span class="math inline">\(j\)</span> as the badger, where the pine marten was detected in a specific 6 hour period, but exclude badgers seen 30 minutes before the pine marten arrival, repeated for all pine marten detection’s)</p></li>
<li><p>While loops (keep jumping until you’ve reached the moon)</p></li>
</ul>
</div>
<div id="if-not-loops-then-what" class="section level3">
<h3><span class="header-section-number">7.5.4</span> If not loops, then what?</h3>
<p>In short, use the apply family of functions; <code>apply()</code>, <code>lapply()</code>, <code>tapply()</code>, <code>sapply()</code>, <code>vapply()</code>, and <code>mapply()</code>. The apply functions can often do the tasks of most “home-brewed” loops, sometimes faster (though that won’t really be an issue for most people) but more importantly with a much lower risk of error. A strategy to have in the back of your mind which may be useful is; for every loop you make, try to remake it using an apply function (often <code>lapply</code> or <code>sapply</code> will work). If you can, use the apply version. There’s nothing worse than realising there was a small, tiny, seemingly meaningless mistake in a loop which weeks, months or years down the line has propagated into a huge mess. We strongly recommend trying to use the apply functions whenever possible.</p>
<div id="lapply" class="section level4 unnumbered">
<h4>lapply</h4>
<p>Your go to apply function will often be <code>lapply()</code> at least in the beginning. The way that <code>lapply()</code> works, and the reason it is often a good alternative to for loops, is that it will go through each element in a list and perform a task (i.e. run a function). It has the added benefit that it will output the results as a list - something you’d have to otherwise code yourself into a loop.</p>
<p>An <code>lapply()</code> has the following structure:</p>
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb403-1"><a href="loops.html#cb403-1"></a><span class="kw">lapply</span>(X, FUN)</span></code></pre></div>
<p>Here <code>X</code> is the vector which we want to do <em>something</em> to. <code>FUN</code> stands for how much fun this is (just kidding!). It’s also is short for “function”.</p>
<p>Let’s start with a simple demonstration first. Let’s use the <code>lapply()</code> function create a sequence from 1 to 5 and add 1 to each observation (just like we did when we used a for loop):</p>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="loops.html#cb404-1"></a><span class="kw">lapply</span>(<span class="dv">0</span><span class="op">:</span><span class="dv">4</span>, <span class="cf">function</span>(a) {a <span class="op">+</span><span class="st"> </span><span class="dv">1</span>})</span>
<span id="cb404-2"><a href="loops.html#cb404-2"></a><span class="co">## [[1]]</span></span>
<span id="cb404-3"><a href="loops.html#cb404-3"></a><span class="co">## [1] 1</span></span>
<span id="cb404-4"><a href="loops.html#cb404-4"></a><span class="co">## </span></span>
<span id="cb404-5"><a href="loops.html#cb404-5"></a><span class="co">## [[2]]</span></span>
<span id="cb404-6"><a href="loops.html#cb404-6"></a><span class="co">## [1] 2</span></span>
<span id="cb404-7"><a href="loops.html#cb404-7"></a><span class="co">## </span></span>
<span id="cb404-8"><a href="loops.html#cb404-8"></a><span class="co">## [[3]]</span></span>
<span id="cb404-9"><a href="loops.html#cb404-9"></a><span class="co">## [1] 3</span></span>
<span id="cb404-10"><a href="loops.html#cb404-10"></a><span class="co">## </span></span>
<span id="cb404-11"><a href="loops.html#cb404-11"></a><span class="co">## [[4]]</span></span>
<span id="cb404-12"><a href="loops.html#cb404-12"></a><span class="co">## [1] 4</span></span>
<span id="cb404-13"><a href="loops.html#cb404-13"></a><span class="co">## </span></span>
<span id="cb404-14"><a href="loops.html#cb404-14"></a><span class="co">## [[5]]</span></span>
<span id="cb404-15"><a href="loops.html#cb404-15"></a><span class="co">## [1] 5</span></span></code></pre></div>
<p>Notice that we need to specify our sequence as <code>0:4</code> to get the output <code>1 ,2 ,3 ,4 , 5</code> as we are adding <code>1</code> to each element of the sequence. See what happens if you use <code>1:5</code> instead.</p>
<p>Equivalently, we could have defined the function first and then used the function in <code>lapply()</code></p>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb405-1"><a href="loops.html#cb405-1"></a>add_fun &lt;-<span class="st"> </span><span class="cf">function</span>(a) {a <span class="op">+</span><span class="st"> </span><span class="dv">1</span>}</span>
<span id="cb405-2"><a href="loops.html#cb405-2"></a><span class="kw">lapply</span>(<span class="dv">0</span><span class="op">:</span><span class="dv">4</span>, add_fun)</span>
<span id="cb405-3"><a href="loops.html#cb405-3"></a><span class="co">## [[1]]</span></span>
<span id="cb405-4"><a href="loops.html#cb405-4"></a><span class="co">## [1] 1</span></span>
<span id="cb405-5"><a href="loops.html#cb405-5"></a><span class="co">## </span></span>
<span id="cb405-6"><a href="loops.html#cb405-6"></a><span class="co">## [[2]]</span></span>
<span id="cb405-7"><a href="loops.html#cb405-7"></a><span class="co">## [1] 2</span></span>
<span id="cb405-8"><a href="loops.html#cb405-8"></a><span class="co">## </span></span>
<span id="cb405-9"><a href="loops.html#cb405-9"></a><span class="co">## [[3]]</span></span>
<span id="cb405-10"><a href="loops.html#cb405-10"></a><span class="co">## [1] 3</span></span>
<span id="cb405-11"><a href="loops.html#cb405-11"></a><span class="co">## </span></span>
<span id="cb405-12"><a href="loops.html#cb405-12"></a><span class="co">## [[4]]</span></span>
<span id="cb405-13"><a href="loops.html#cb405-13"></a><span class="co">## [1] 4</span></span>
<span id="cb405-14"><a href="loops.html#cb405-14"></a><span class="co">## </span></span>
<span id="cb405-15"><a href="loops.html#cb405-15"></a><span class="co">## [[5]]</span></span>
<span id="cb405-16"><a href="loops.html#cb405-16"></a><span class="co">## [1] 5</span></span></code></pre></div>
<p>The <code>sapply()</code> function does the same thing as <code>lapply()</code> but instead of storing the results as a list, it stores them as a vector.</p>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="loops.html#cb406-1"></a><span class="kw">sapply</span>(<span class="dv">0</span><span class="op">:</span><span class="dv">4</span>, <span class="cf">function</span>(a) {a <span class="op">+</span><span class="st"> </span><span class="dv">1</span>})</span>
<span id="cb406-2"><a href="loops.html#cb406-2"></a><span class="co">## [1] 1 2 3 4 5</span></span></code></pre></div>
<p>As you can see, in both cases, we get exactly the same results as when we used the for loop.</p>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="combining-logical-operators.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="exercise-6.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/alexd106/Rbook/edit/master/07-programming.Rmd",
"text": "Suggest an edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["Rbook.pdf", "Download PDF version"]],
"toc": {
"collapse": "subsection"
},
"highlight": "tango"
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
